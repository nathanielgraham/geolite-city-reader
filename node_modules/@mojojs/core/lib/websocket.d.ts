/// <reference types="node" />
import type { JSONValue } from './types.js';
import type { UserAgentResponse } from './user-agent/response.js';
import type WS from 'ws';
import EventEmitter from 'events';
interface WebSocketControlEvents {
    close: (...args: any[]) => void;
    ping: (...args: any[]) => void;
    pong: (...args: any[]) => void;
}
interface WebSocketEvents extends WebSocketControlEvents {
    error: (this: WebSocket, error: Error) => void;
    message: (this: WebSocket, message: JSONValue | Buffer) => void;
}
declare interface WebSocket {
    on: <T extends keyof WebSocketEvents>(event: T, listener: WebSocketEvents[T]) => this;
    emit: <T extends keyof WebSocketEvents>(event: T, ...args: Parameters<WebSocketEvents[T]>) => boolean;
}
/**
 * WebSocket connection class.
 */
declare class WebSocket extends EventEmitter {
    /**
     * WebSocket handshake.
     */
    handshake: UserAgentResponse | null;
    /**
     * JSON mode.
     */
    jsonMode: boolean;
    _ws: WS;
    constructor(ws: WS, handshake: UserAgentResponse | null, options: {
        jsonMode: boolean;
    });
    [Symbol.asyncIterator](): AsyncIterableIterator<JSONValue | Buffer>;
    /**
     * Close WebSocket connection.
     */
    close(code?: number, reason?: string): void;
    /**
     * Send WebSocket ping frame.
     */
    ping(data: Buffer): Promise<void>;
    /**
     * Send WebSocket message.
     */
    send(message: JSONValue | Buffer): Promise<void>;
    _messageIterator(): AsyncIterableIterator<Array<JSONValue | Buffer>>;
    _safeHandler<T extends keyof WebSocketControlEvents>(event: T, ...args: Parameters<WebSocketControlEvents[T]>): void;
    _safeMessageHandler(message: Buffer, isBinary: boolean): void;
}
export { WebSocket };
